<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ thống Quản lý Tiệm thuốc Mini</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="container">
        <div class="sidebar">
            <div class="logo-section">
                <h2><i class="fas fa-pills" style="color: #ff6b6b;"></i> NHÀ THUỐC MINI</h2>
            </div>

            <ul class="menu">
                <li class="active"><a href="dashboard.html"><i class="fas fa-home"></i> Trang chủ</a></li>
                <li><a href="banhang.html"><i class="fas fa-shopping-cart"></i> Cửa hàng</a></li>
                <li><a href="dashboard.html"><i class="fas fa-chart-bar"></i> Thống kê</a></li>
                <li><a href="khohang.html"><i class="fas fa-box"></i> Kho hàng</a></li>
                <li><a href="khachhang.html"><i class="fas fa-users"></i> Khách hàng</a></li>
                <li><a href="cai_dat.html"><i class="fas fa-cog"></i> Cài đặt</a></li>
            </ul>

            <div class="contact-info">
                <p><strong>Liên hệ hỗ trợ:</strong></p>
                <p>• Admin</p>
                <p>• Hotline: 0900******</p>
            </div>
        </div>

        <div class="main-content">
            <header>
                <div class="page-title"><h2>Trang chủ</h2></div>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Tìm kiếm...">
                </div>
                <div class="user-info">
                    <i class="fas fa-bell notification"></i>
                    <div class="user-profile">
                        <i class="fas fa-user-circle"></i> <span>User: Admin</span>
                    </div>
                </div>
            </header>

            <div class="content-body">
                <div class="stats-grid">
                    <div class="card">
                        <h3>Doanh thu hôm nay</h3>
                        <p class="number" style="color: #00d2d3;">$10.000Đ</p>
                        <div style="height: 150px; position: relative;">
                            <canvas id="chartDoanhThu"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Đơn hàng mới</h3>
                        <p class="number">12</p>
                        <div style="height: 150px; position: relative;">
                            <canvas id="chartDonHang"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Khách hàng thân thiết</h3>
                        <p class="number">113</p>
                        <div style="height: 150px; position: relative;">
                            <canvas id="chartKhachHang"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Sản phẩm bán chạy</h3>
                        <ul class="top-products" style="list-style: none; margin-top: 10px; padding: 0;">
                            <li style="padding: 8px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between;">
                                <span><i class="fas fa-tag" style="color: #2ecc71;"></i> Strepsils Honey</span>
                                <span style="font-weight: bold;">20k</span>
                            </li>
                            <li style="padding: 8px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between;">
                                <span><i class="fas fa-tag" style="color: #2ecc71;"></i> Panadol Extra</span>
                                <span style="font-weight: bold;">15k</span>
                            </li>
                            <li style="padding: 8px 0; display: flex; justify-content: space-between;">
                                <span><i class="fas fa-tag" style="color: #2ecc71;"></i> Vitamin C</span>
                                <span style="font-weight: bold;">50k</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1. Biểu đồ Doanh thu (Đường cong)
        new Chart(document.getElementById('chartDoanhThu'), {
            type: 'line',
            data: {
                labels: ['8h', '10h', '12h', '14h', '16h', '18h'],
                datasets: [{
                    label: 'Doanh thu',
                    data: [500, 1200, 900, 1500, 2000, 1800],
                    borderColor: '#00d2d3',
                    backgroundColor: 'rgba(0, 210, 211, 0.2)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
        });

        // 2. Biểu đồ Đơn hàng (Cột xanh dương)
        new Chart(document.getElementById('chartDonHang'), {
            type: 'bar',
            data: {
                labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7'],
                datasets: [{
                    label: 'Đơn',
                    data: [12, 19, 3, 5, 2, 3],
                    backgroundColor: '#54a0ff',
                    borderRadius: 5
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
        });

        // 3. Biểu đồ Khách hàng (Cột nhiều màu)
        new Chart(document.getElementById('chartKhachHang'), {
            type: 'bar',
            data: {
                labels: ['Mới', 'Quen', 'VIP'],
                datasets: [{
                    label: 'Khách',
                    data: [50, 30, 20],
                    backgroundColor: ['#1dd1a1', '#ff9f43', '#ee5253'],
                    borderRadius: 5
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
        });

        // Kiểm tra xem đã đăng nhập chưa
    const currentUser = sessionStorage.getItem('currentUser');
    
    if (currentUser) {
        // Nếu có, thay đổi chữ Admin thành tên người dùng
        document.querySelector('.user-profile span').innerText = "User: " + currentUser;
    } else {
        // Nếu chưa đăng nhập mà cố vào trang chủ -> Đá về trang Login
        // window.location.href = 'login.html'; // (Bỏ comment dòng này nếu muốn bắt buộc đăng nhập)
    }
    </script>
</body>
</html>